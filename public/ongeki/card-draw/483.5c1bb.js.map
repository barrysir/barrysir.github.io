{"version":3,"file":"483.5c1bb.js","mappings":"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","sources":["webpack://ddr-card-draw/./node_modules/peerjs/dist/peerjs.esm.js"],"sourcesContent":["var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __reExport = (target, module, copyDefault, desc) => {\n  if (module && typeof module === \"object\" || typeof module === \"function\") {\n    for (let key of __getOwnPropNames(module))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable });\n  }\n  return target;\n};\nvar __toESM = (module, isNodeMode) => {\n  return __reExport(__markAsModule(__defProp(module != null ? __create(__getProtoOf(module)) : {}, \"default\", !isNodeMode && module && module.__esModule ? { get: () => module.default, enumerable: true } : { value: module, enumerable: true })), module);\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// node_modules/peerjs-js-binarypack/lib/bufferbuilder.js\nvar require_bufferbuilder = __commonJS({\n  \"node_modules/peerjs-js-binarypack/lib/bufferbuilder.js\"(exports, module) {\n    var binaryFeatures = {};\n    binaryFeatures.useBlobBuilder = function() {\n      try {\n        new Blob([]);\n        return false;\n      } catch (e) {\n        return true;\n      }\n    }();\n    binaryFeatures.useArrayBufferView = !binaryFeatures.useBlobBuilder && function() {\n      try {\n        return new Blob([new Uint8Array([])]).size === 0;\n      } catch (e) {\n        return true;\n      }\n    }();\n    module.exports.binaryFeatures = binaryFeatures;\n    var BlobBuilder = module.exports.BlobBuilder;\n    if (typeof window !== \"undefined\") {\n      BlobBuilder = module.exports.BlobBuilder = window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder || window.BlobBuilder;\n    }\n    function BufferBuilder() {\n      this._pieces = [];\n      this._parts = [];\n    }\n    BufferBuilder.prototype.append = function(data) {\n      if (typeof data === \"number\") {\n        this._pieces.push(data);\n      } else {\n        this.flush();\n        this._parts.push(data);\n      }\n    };\n    BufferBuilder.prototype.flush = function() {\n      if (this._pieces.length > 0) {\n        var buf = new Uint8Array(this._pieces);\n        if (!binaryFeatures.useArrayBufferView) {\n          buf = buf.buffer;\n        }\n        this._parts.push(buf);\n        this._pieces = [];\n      }\n    };\n    BufferBuilder.prototype.getBuffer = function() {\n      this.flush();\n      if (binaryFeatures.useBlobBuilder) {\n        var builder = new BlobBuilder();\n        for (var i = 0, ii = this._parts.length; i < ii; i++) {\n          builder.append(this._parts[i]);\n        }\n        return builder.getBlob();\n      } else {\n        return new Blob(this._parts);\n      }\n    };\n    module.exports.BufferBuilder = BufferBuilder;\n  }\n});\n\n// node_modules/peerjs-js-binarypack/lib/binarypack.js\nvar require_binarypack = __commonJS({\n  \"node_modules/peerjs-js-binarypack/lib/binarypack.js\"(exports, module) {\n    var BufferBuilder = require_bufferbuilder().BufferBuilder;\n    var binaryFeatures = require_bufferbuilder().binaryFeatures;\n    var BinaryPack2 = {\n      unpack: function(data) {\n        var unpacker = new Unpacker(data);\n        return unpacker.unpack();\n      },\n      pack: function(data) {\n        var packer = new Packer();\n        packer.pack(data);\n        var buffer = packer.getBuffer();\n        return buffer;\n      }\n    };\n    module.exports = BinaryPack2;\n    function Unpacker(data) {\n      this.index = 0;\n      this.dataBuffer = data;\n      this.dataView = new Uint8Array(this.dataBuffer);\n      this.length = this.dataBuffer.byteLength;\n    }\n    Unpacker.prototype.unpack = function() {\n      var type = this.unpack_uint8();\n      if (type < 128) {\n        return type;\n      } else if ((type ^ 224) < 32) {\n        return (type ^ 224) - 32;\n      }\n      var size;\n      if ((size = type ^ 160) <= 15) {\n        return this.unpack_raw(size);\n      } else if ((size = type ^ 176) <= 15) {\n        return this.unpack_string(size);\n      } else if ((size = type ^ 144) <= 15) {\n        return this.unpack_array(size);\n      } else if ((size = type ^ 128) <= 15) {\n        return this.unpack_map(size);\n      }\n      switch (type) {\n        case 192:\n          return null;\n        case 193:\n          return void 0;\n        case 194:\n          return false;\n        case 195:\n          return true;\n        case 202:\n          return this.unpack_float();\n        case 203:\n          return this.unpack_double();\n        case 204:\n          return this.unpack_uint8();\n        case 205:\n          return this.unpack_uint16();\n        case 206:\n          return this.unpack_uint32();\n        case 207:\n          return this.unpack_uint64();\n        case 208:\n          return this.unpack_int8();\n        case 209:\n          return this.unpack_int16();\n        case 210:\n          return this.unpack_int32();\n        case 211:\n          return this.unpack_int64();\n        case 212:\n          return void 0;\n        case 213:\n          return void 0;\n        case 214:\n          return void 0;\n        case 215:\n          return void 0;\n        case 216:\n          size = this.unpack_uint16();\n          return this.unpack_string(size);\n        case 217:\n          size = this.unpack_uint32();\n          return this.unpack_string(size);\n        case 218:\n          size = this.unpack_uint16();\n          return this.unpack_raw(size);\n        case 219:\n          size = this.unpack_uint32();\n          return this.unpack_raw(size);\n        case 220:\n          size = this.unpack_uint16();\n          return this.unpack_array(size);\n        case 221:\n          size = this.unpack_uint32();\n          return this.unpack_array(size);\n        case 222:\n          size = this.unpack_uint16();\n          return this.unpack_map(size);\n        case 223:\n          size = this.unpack_uint32();\n          return this.unpack_map(size);\n      }\n    };\n    Unpacker.prototype.unpack_uint8 = function() {\n      var byte = this.dataView[this.index] & 255;\n      this.index++;\n      return byte;\n    };\n    Unpacker.prototype.unpack_uint16 = function() {\n      var bytes = this.read(2);\n      var uint16 = (bytes[0] & 255) * 256 + (bytes[1] & 255);\n      this.index += 2;\n      return uint16;\n    };\n    Unpacker.prototype.unpack_uint32 = function() {\n      var bytes = this.read(4);\n      var uint32 = ((bytes[0] * 256 + bytes[1]) * 256 + bytes[2]) * 256 + bytes[3];\n      this.index += 4;\n      return uint32;\n    };\n    Unpacker.prototype.unpack_uint64 = function() {\n      var bytes = this.read(8);\n      var uint64 = ((((((bytes[0] * 256 + bytes[1]) * 256 + bytes[2]) * 256 + bytes[3]) * 256 + bytes[4]) * 256 + bytes[5]) * 256 + bytes[6]) * 256 + bytes[7];\n      this.index += 8;\n      return uint64;\n    };\n    Unpacker.prototype.unpack_int8 = function() {\n      var uint8 = this.unpack_uint8();\n      return uint8 < 128 ? uint8 : uint8 - (1 << 8);\n    };\n    Unpacker.prototype.unpack_int16 = function() {\n      var uint16 = this.unpack_uint16();\n      return uint16 < 32768 ? uint16 : uint16 - (1 << 16);\n    };\n    Unpacker.prototype.unpack_int32 = function() {\n      var uint32 = this.unpack_uint32();\n      return uint32 < Math.pow(2, 31) ? uint32 : uint32 - Math.pow(2, 32);\n    };\n    Unpacker.prototype.unpack_int64 = function() {\n      var uint64 = this.unpack_uint64();\n      return uint64 < Math.pow(2, 63) ? uint64 : uint64 - Math.pow(2, 64);\n    };\n    Unpacker.prototype.unpack_raw = function(size) {\n      if (this.length < this.index + size) {\n        throw new Error(\"BinaryPackFailure: index is out of range \" + this.index + \" \" + size + \" \" + this.length);\n      }\n      var buf = this.dataBuffer.slice(this.index, this.index + size);\n      this.index += size;\n      return buf;\n    };\n    Unpacker.prototype.unpack_string = function(size) {\n      var bytes = this.read(size);\n      var i = 0;\n      var str = \"\";\n      var c;\n      var code;\n      while (i < size) {\n        c = bytes[i];\n        if (c < 128) {\n          str += String.fromCharCode(c);\n          i++;\n        } else if ((c ^ 192) < 32) {\n          code = (c ^ 192) << 6 | bytes[i + 1] & 63;\n          str += String.fromCharCode(code);\n          i += 2;\n        } else {\n          code = (c & 15) << 12 | (bytes[i + 1] & 63) << 6 | bytes[i + 2] & 63;\n          str += String.fromCharCode(code);\n          i += 3;\n        }\n      }\n      this.index += size;\n      return str;\n    };\n    Unpacker.prototype.unpack_array = function(size) {\n      var objects = new Array(size);\n      for (var i = 0; i < size; i++) {\n        objects[i] = this.unpack();\n      }\n      return objects;\n    };\n    Unpacker.prototype.unpack_map = function(size) {\n      var map = {};\n      for (var i = 0; i < size; i++) {\n        var key = this.unpack();\n        var value = this.unpack();\n        map[key] = value;\n      }\n      return map;\n    };\n    Unpacker.prototype.unpack_float = function() {\n      var uint32 = this.unpack_uint32();\n      var sign = uint32 >> 31;\n      var exp = (uint32 >> 23 & 255) - 127;\n      var fraction = uint32 & 8388607 | 8388608;\n      return (sign === 0 ? 1 : -1) * fraction * Math.pow(2, exp - 23);\n    };\n    Unpacker.prototype.unpack_double = function() {\n      var h32 = this.unpack_uint32();\n      var l32 = this.unpack_uint32();\n      var sign = h32 >> 31;\n      var exp = (h32 >> 20 & 2047) - 1023;\n      var hfrac = h32 & 1048575 | 1048576;\n      var frac = hfrac * Math.pow(2, exp - 20) + l32 * Math.pow(2, exp - 52);\n      return (sign === 0 ? 1 : -1) * frac;\n    };\n    Unpacker.prototype.read = function(length) {\n      var j = this.index;\n      if (j + length <= this.length) {\n        return this.dataView.subarray(j, j + length);\n      } else {\n        throw new Error(\"BinaryPackFailure: read index out of range\");\n      }\n    };\n    function Packer() {\n      this.bufferBuilder = new BufferBuilder();\n    }\n    Packer.prototype.getBuffer = function() {\n      return this.bufferBuilder.getBuffer();\n    };\n    Packer.prototype.pack = function(value) {\n      var type = typeof value;\n      if (type === \"string\") {\n        this.pack_string(value);\n      } else if (type === \"number\") {\n        if (Math.floor(value) === value) {\n          this.pack_integer(value);\n        } else {\n          this.pack_double(value);\n        }\n      } else if (type === \"boolean\") {\n        if (value === true) {\n          this.bufferBuilder.append(195);\n        } else if (value === false) {\n          this.bufferBuilder.append(194);\n        }\n      } else if (type === \"undefined\") {\n        this.bufferBuilder.append(192);\n      } else if (type === \"object\") {\n        if (value === null) {\n          this.bufferBuilder.append(192);\n        } else {\n          var constructor = value.constructor;\n          if (constructor == Array) {\n            this.pack_array(value);\n          } else if (constructor == Blob || constructor == File || value instanceof Blob || value instanceof File) {\n            this.pack_bin(value);\n          } else if (constructor == ArrayBuffer) {\n            if (binaryFeatures.useArrayBufferView) {\n              this.pack_bin(new Uint8Array(value));\n            } else {\n              this.pack_bin(value);\n            }\n          } else if (\"BYTES_PER_ELEMENT\" in value) {\n            if (binaryFeatures.useArrayBufferView) {\n              this.pack_bin(new Uint8Array(value.buffer));\n            } else {\n              this.pack_bin(value.buffer);\n            }\n          } else if (constructor == Object || constructor.toString().startsWith(\"class\")) {\n            this.pack_object(value);\n          } else if (constructor == Date) {\n            this.pack_string(value.toString());\n          } else if (typeof value.toBinaryPack === \"function\") {\n            this.bufferBuilder.append(value.toBinaryPack());\n          } else {\n            throw new Error('Type \"' + constructor.toString() + '\" not yet supported');\n          }\n        }\n      } else {\n        throw new Error('Type \"' + type + '\" not yet supported');\n      }\n      this.bufferBuilder.flush();\n    };\n    Packer.prototype.pack_bin = function(blob) {\n      var length = blob.length || blob.byteLength || blob.size;\n      if (length <= 15) {\n        this.pack_uint8(160 + length);\n      } else if (length <= 65535) {\n        this.bufferBuilder.append(218);\n        this.pack_uint16(length);\n      } else if (length <= 4294967295) {\n        this.bufferBuilder.append(219);\n        this.pack_uint32(length);\n      } else {\n        throw new Error(\"Invalid length\");\n      }\n      this.bufferBuilder.append(blob);\n    };\n    Packer.prototype.pack_string = function(str) {\n      var length = utf8Length(str);\n      if (length <= 15) {\n        this.pack_uint8(176 + length);\n      } else if (length <= 65535) {\n        this.bufferBuilder.append(216);\n        this.pack_uint16(length);\n      } else if (length <= 4294967295) {\n        this.bufferBuilder.append(217);\n        this.pack_uint32(length);\n      } else {\n        throw new Error(\"Invalid length\");\n      }\n      this.bufferBuilder.append(str);\n    };\n    Packer.prototype.pack_array = function(ary) {\n      var length = ary.length;\n      if (length <= 15) {\n        this.pack_uint8(144 + length);\n      } else if (length <= 65535) {\n        this.bufferBuilder.append(220);\n        this.pack_uint16(length);\n      } else if (length <= 4294967295) {\n        this.bufferBuilder.append(221);\n        this.pack_uint32(length);\n      } else {\n        throw new Error(\"Invalid length\");\n      }\n      for (var i = 0; i < length; i++) {\n        this.pack(ary[i]);\n      }\n    };\n    Packer.prototype.pack_integer = function(num) {\n      if (num >= -32 && num <= 127) {\n        this.bufferBuilder.append(num & 255);\n      } else if (num >= 0 && num <= 255) {\n        this.bufferBuilder.append(204);\n        this.pack_uint8(num);\n      } else if (num >= -128 && num <= 127) {\n        this.bufferBuilder.append(208);\n        this.pack_int8(num);\n      } else if (num >= 0 && num <= 65535) {\n        this.bufferBuilder.append(205);\n        this.pack_uint16(num);\n      } else if (num >= -32768 && num <= 32767) {\n        this.bufferBuilder.append(209);\n        this.pack_int16(num);\n      } else if (num >= 0 && num <= 4294967295) {\n        this.bufferBuilder.append(206);\n        this.pack_uint32(num);\n      } else if (num >= -2147483648 && num <= 2147483647) {\n        this.bufferBuilder.append(210);\n        this.pack_int32(num);\n      } else if (num >= -9223372036854776e3 && num <= 9223372036854776e3) {\n        this.bufferBuilder.append(211);\n        this.pack_int64(num);\n      } else if (num >= 0 && num <= 18446744073709552e3) {\n        this.bufferBuilder.append(207);\n        this.pack_uint64(num);\n      } else {\n        throw new Error(\"Invalid integer\");\n      }\n    };\n    Packer.prototype.pack_double = function(num) {\n      var sign = 0;\n      if (num < 0) {\n        sign = 1;\n        num = -num;\n      }\n      var exp = Math.floor(Math.log(num) / Math.LN2);\n      var frac0 = num / Math.pow(2, exp) - 1;\n      var frac1 = Math.floor(frac0 * Math.pow(2, 52));\n      var b32 = Math.pow(2, 32);\n      var h32 = sign << 31 | exp + 1023 << 20 | frac1 / b32 & 1048575;\n      var l32 = frac1 % b32;\n      this.bufferBuilder.append(203);\n      this.pack_int32(h32);\n      this.pack_int32(l32);\n    };\n    Packer.prototype.pack_object = function(obj) {\n      var keys = Object.keys(obj);\n      var length = keys.length;\n      if (length <= 15) {\n        this.pack_uint8(128 + length);\n      } else if (length <= 65535) {\n        this.bufferBuilder.append(222);\n        this.pack_uint16(length);\n      } else if (length <= 4294967295) {\n        this.bufferBuilder.append(223);\n        this.pack_uint32(length);\n      } else {\n        throw new Error(\"Invalid length\");\n      }\n      for (var prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n          this.pack(prop);\n          this.pack(obj[prop]);\n        }\n      }\n    };\n    Packer.prototype.pack_uint8 = function(num) {\n      this.bufferBuilder.append(num);\n    };\n    Packer.prototype.pack_uint16 = function(num) {\n      this.bufferBuilder.append(num >> 8);\n      this.bufferBuilder.append(num & 255);\n    };\n    Packer.prototype.pack_uint32 = function(num) {\n      var n = num & 4294967295;\n      this.bufferBuilder.append((n & 4278190080) >>> 24);\n      this.bufferBuilder.append((n & 16711680) >>> 16);\n      this.bufferBuilder.append((n & 65280) >>> 8);\n      this.bufferBuilder.append(n & 255);\n    };\n    Packer.prototype.pack_uint64 = function(num) {\n      var high = num / Math.pow(2, 32);\n      var low = num % Math.pow(2, 32);\n      this.bufferBuilder.append((high & 4278190080) >>> 24);\n      this.bufferBuilder.append((high & 16711680) >>> 16);\n      this.bufferBuilder.append((high & 65280) >>> 8);\n      this.bufferBuilder.append(high & 255);\n      this.bufferBuilder.append((low & 4278190080) >>> 24);\n      this.bufferBuilder.append((low & 16711680) >>> 16);\n      this.bufferBuilder.append((low & 65280) >>> 8);\n      this.bufferBuilder.append(low & 255);\n    };\n    Packer.prototype.pack_int8 = function(num) {\n      this.bufferBuilder.append(num & 255);\n    };\n    Packer.prototype.pack_int16 = function(num) {\n      this.bufferBuilder.append((num & 65280) >> 8);\n      this.bufferBuilder.append(num & 255);\n    };\n    Packer.prototype.pack_int32 = function(num) {\n      this.bufferBuilder.append(num >>> 24 & 255);\n      this.bufferBuilder.append((num & 16711680) >>> 16);\n      this.bufferBuilder.append((num & 65280) >>> 8);\n      this.bufferBuilder.append(num & 255);\n    };\n    Packer.prototype.pack_int64 = function(num) {\n      var high = Math.floor(num / Math.pow(2, 32));\n      var low = num % Math.pow(2, 32);\n      this.bufferBuilder.append((high & 4278190080) >>> 24);\n      this.bufferBuilder.append((high & 16711680) >>> 16);\n      this.bufferBuilder.append((high & 65280) >>> 8);\n      this.bufferBuilder.append(high & 255);\n      this.bufferBuilder.append((low & 4278190080) >>> 24);\n      this.bufferBuilder.append((low & 16711680) >>> 16);\n      this.bufferBuilder.append((low & 65280) >>> 8);\n      this.bufferBuilder.append(low & 255);\n    };\n    function _utf8Replace(m) {\n      var code = m.charCodeAt(0);\n      if (code <= 2047)\n        return \"00\";\n      if (code <= 65535)\n        return \"000\";\n      if (code <= 2097151)\n        return \"0000\";\n      if (code <= 67108863)\n        return \"00000\";\n      return \"000000\";\n    }\n    function utf8Length(str) {\n      if (str.length > 600) {\n        return new Blob([str]).size;\n      } else {\n        return str.replace(/[^\\u0000-\\u007F]/g, _utf8Replace).length;\n      }\n    }\n  }\n});\n\n// node_modules/eventemitter3/index.js\nvar require_eventemitter3 = __commonJS({\n  \"node_modules/eventemitter3/index.js\"(exports, module) {\n    \"use strict\";\n    var has = Object.prototype.hasOwnProperty;\n    var prefix = \"~\";\n    function Events() {\n    }\n    if (Object.create) {\n      Events.prototype = /* @__PURE__ */ Object.create(null);\n      if (!new Events().__proto__)\n        prefix = false;\n    }\n    function EE(fn, context, once) {\n      this.fn = fn;\n      this.context = context;\n      this.once = once || false;\n    }\n    function addListener(emitter, event, fn, context, once) {\n      if (typeof fn !== \"function\") {\n        throw new TypeError(\"The listener must be a function\");\n      }\n      var listener = new EE(fn, context || emitter, once), evt = prefix ? prefix + event : event;\n      if (!emitter._events[evt])\n        emitter._events[evt] = listener, emitter._eventsCount++;\n      else if (!emitter._events[evt].fn)\n        emitter._events[evt].push(listener);\n      else\n        emitter._events[evt] = [emitter._events[evt], listener];\n      return emitter;\n    }\n    function clearEvent(emitter, evt) {\n      if (--emitter._eventsCount === 0)\n        emitter._events = new Events();\n      else\n        delete emitter._events[evt];\n    }\n    function EventEmitter5() {\n      this._events = new Events();\n      this._eventsCount = 0;\n    }\n    EventEmitter5.prototype.eventNames = function eventNames() {\n      var names = [], events, name;\n      if (this._eventsCount === 0)\n        return names;\n      for (name in events = this._events) {\n        if (has.call(events, name))\n          names.push(prefix ? name.slice(1) : name);\n      }\n      if (Object.getOwnPropertySymbols) {\n        return names.concat(Object.getOwnPropertySymbols(events));\n      }\n      return names;\n    };\n    EventEmitter5.prototype.listeners = function listeners(event) {\n      var evt = prefix ? prefix + event : event, handlers = this._events[evt];\n      if (!handlers)\n        return [];\n      if (handlers.fn)\n        return [handlers.fn];\n      for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n        ee[i] = handlers[i].fn;\n      }\n      return ee;\n    };\n    EventEmitter5.prototype.listenerCount = function listenerCount(event) {\n      var evt = prefix ? prefix + event : event, listeners = this._events[evt];\n      if (!listeners)\n        return 0;\n      if (listeners.fn)\n        return 1;\n      return listeners.length;\n    };\n    EventEmitter5.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n      var evt = prefix ? prefix + event : event;\n      if (!this._events[evt])\n        return false;\n      var listeners = this._events[evt], len = arguments.length, args, i;\n      if (listeners.fn) {\n        if (listeners.once)\n          this.removeListener(event, listeners.fn, void 0, true);\n        switch (len) {\n          case 1:\n            return listeners.fn.call(listeners.context), true;\n          case 2:\n            return listeners.fn.call(listeners.context, a1), true;\n          case 3:\n            return listeners.fn.call(listeners.context, a1, a2), true;\n          case 4:\n            return listeners.fn.call(listeners.context, a1, a2, a3), true;\n          case 5:\n            return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n          case 6:\n            return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n        }\n        for (i = 1, args = new Array(len - 1); i < len; i++) {\n          args[i - 1] = arguments[i];\n        }\n        listeners.fn.apply(listeners.context, args);\n      } else {\n        var length = listeners.length, j;\n        for (i = 0; i < length; i++) {\n          if (listeners[i].once)\n            this.removeListener(event, listeners[i].fn, void 0, true);\n          switch (len) {\n            case 1:\n              listeners[i].fn.call(listeners[i].context);\n              break;\n            case 2:\n              listeners[i].fn.call(listeners[i].context, a1);\n              break;\n            case 3:\n              listeners[i].fn.call(listeners[i].context, a1, a2);\n              break;\n            case 4:\n              listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n              break;\n            default:\n              if (!args)\n                for (j = 1, args = new Array(len - 1); j < len; j++) {\n                  args[j - 1] = arguments[j];\n                }\n              listeners[i].fn.apply(listeners[i].context, args);\n          }\n        }\n      }\n      return true;\n    };\n    EventEmitter5.prototype.on = function on(event, fn, context) {\n      return addListener(this, event, fn, context, false);\n    };\n    EventEmitter5.prototype.once = function once(event, fn, context) {\n      return addListener(this, event, fn, context, true);\n    };\n    EventEmitter5.prototype.removeListener = function removeListener(event, fn, context, once) {\n      var evt = prefix ? prefix + event : event;\n      if (!this._events[evt])\n        return this;\n      if (!fn) {\n        clearEvent(this, evt);\n        return this;\n      }\n      var listeners = this._events[evt];\n      if (listeners.fn) {\n        if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) {\n          clearEvent(this, evt);\n        }\n      } else {\n        for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n          if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) {\n            events.push(listeners[i]);\n          }\n        }\n        if (events.length)\n          this._events[evt] = events.length === 1 ? events[0] : events;\n        else\n          clearEvent(this, evt);\n      }\n      return this;\n    };\n    EventEmitter5.prototype.removeAllListeners = function removeAllListeners(event) {\n      var evt;\n      if (event) {\n        evt = prefix ? prefix + event : event;\n        if (this._events[evt])\n          clearEvent(this, evt);\n      } else {\n        this._events = new Events();\n        this._eventsCount = 0;\n      }\n      return this;\n    };\n    EventEmitter5.prototype.off = EventEmitter5.prototype.removeListener;\n    EventEmitter5.prototype.addListener = EventEmitter5.prototype.on;\n    EventEmitter5.prefixed = prefix;\n    EventEmitter5.EventEmitter = EventEmitter5;\n    if (typeof module !== \"undefined\") {\n      module.exports = EventEmitter5;\n    }\n  }\n});\n\n// lib/utils.ts\nvar BinaryPack = __toESM(require_binarypack());\nvar DEFAULT_CONFIG = {\n  iceServers: [\n    { urls: \"stun:stun.l.google.com:19302\" },\n    { urls: \"turn:0.peerjs.com:3478\", username: \"peerjs\", credential: \"peerjsp\" }\n  ],\n  sdpSemantics: \"unified-plan\"\n};\nvar Utils = new class {\n  constructor() {\n    this.CLOUD_HOST = \"0.peerjs.com\";\n    this.CLOUD_PORT = 443;\n    this.chunkedMTU = 16300;\n    this.defaultConfig = DEFAULT_CONFIG;\n    this.pack = BinaryPack.pack;\n    this.unpack = BinaryPack.unpack;\n    this._dataCount = 1;\n  }\n  validateId(id) {\n    return !id || /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(id);\n  }\n  chunk(blob) {\n    const chunks = [];\n    const size = blob.size;\n    const total = Math.ceil(size / Utils.chunkedMTU);\n    let index = 0;\n    let start = 0;\n    while (start < size) {\n      const end = Math.min(size, start + Utils.chunkedMTU);\n      const b = blob.slice(start, end);\n      const chunk = {\n        __peerData: this._dataCount,\n        n: index,\n        data: b,\n        total\n      };\n      chunks.push(chunk);\n      start = end;\n      index++;\n    }\n    this._dataCount++;\n    return chunks;\n  }\n  blobToArrayBuffer(FileReaderCtr, blob, cb) {\n    const fr = new FileReaderCtr();\n    fr.onload = function(evt) {\n      if (evt.target) {\n        cb(evt.target.result);\n      }\n    };\n    fr.readAsArrayBuffer(blob);\n    return fr;\n  }\n  binaryStringToArrayBuffer(binary) {\n    const byteArray = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n      byteArray[i] = binary.charCodeAt(i) & 255;\n    }\n    return byteArray.buffer;\n  }\n  randomToken() {\n    return Math.random().toString(36).substr(2);\n  }\n  isSecure() {\n    return location.protocol === \"https:\";\n  }\n}();\n\n// lib/peer.ts\nvar import_eventemitter34 = __toESM(require_eventemitter3());\n\n// lib/logger.ts\nvar LOG_PREFIX = \"PeerJS: \";\nvar Logger = class {\n  constructor() {\n    this._logLevel = 0 /* Disabled */;\n  }\n  get logLevel() {\n    return this._logLevel;\n  }\n  set logLevel(logLevel) {\n    this._logLevel = logLevel;\n  }\n  log(...args) {\n    if (this._logLevel >= 3 /* All */) {\n      this._print(3 /* All */, ...args);\n    }\n  }\n  warn(...args) {\n    if (this._logLevel >= 2 /* Warnings */) {\n      this._print(2 /* Warnings */, ...args);\n    }\n  }\n  error(...args) {\n    if (this._logLevel >= 1 /* Errors */) {\n      this._print(1 /* Errors */, ...args);\n    }\n  }\n  setLogFunction(fn) {\n    this._print = fn;\n  }\n  _print(logLevel, ...rest) {\n    const copy = [LOG_PREFIX, ...rest];\n    for (let i in copy) {\n      if (copy[i] instanceof Error) {\n        copy[i] = \"(\" + copy[i].name + \") \" + copy[i].message;\n      }\n    }\n    if (logLevel >= 3 /* All */) {\n      console.log(...copy);\n    } else if (logLevel >= 2 /* Warnings */) {\n      console.warn(\"WARNING\", ...copy);\n    } else if (logLevel >= 1 /* Errors */) {\n      console.error(\"ERROR\", ...copy);\n    }\n  }\n};\nvar logger_default = new Logger();\n\n// lib/socket.ts\nvar import_eventemitter3 = __toESM(require_eventemitter3());\nvar Socket = class extends import_eventemitter3.EventEmitter {\n  constructor({ secure, host, port, path, key, pingInterval = 5e3, polyfills }) {\n    super();\n    this._disconnected = true;\n    this._id = null;\n    this._messagesQueue = [];\n    this.alive = false;\n    this._destroyed = false;\n    var _a;\n    this.pingInterval = pingInterval;\n    const wsProtocol = secure ? \"wss://\" : \"ws://\";\n    this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n    this.WebSocketConstructor = (_a = polyfills == null ? void 0 : polyfills.WebSocket) != null ? _a : window.WebSocket;\n  }\n  get messagesQueue() {\n    return this._messagesQueue;\n  }\n  get destroyed() {\n    return this._destroyed;\n  }\n  start(id, token) {\n    if (this._destroyed)\n      throw new Error(\"Socket was destroyed!\");\n    this._id = id;\n    if (!!this._socket || !this._disconnected) {\n      return;\n    }\n    const wsUrl = `${this._baseUrl}&id=${id}&token=${token}`;\n    this._socket = new this.WebSocketConstructor(wsUrl);\n    this._disconnected = false;\n    this._socket.onmessage = (event) => {\n      if (this._destroyed)\n        return;\n      let data;\n      try {\n        data = JSON.parse(event.data);\n        logger_default.log(\"Server message received:\", data);\n      } catch (e) {\n        logger_default.log(\"Invalid server message\", event.data);\n        return;\n      }\n      this.emit(\"message\" /* Message */, data);\n    };\n    this._socket.onclose = (event) => {\n      if (this._disconnected || this._destroyed) {\n        return;\n      }\n      logger_default.log(\"Socket closed.\", event);\n      this._cleanup();\n      this._disconnected = true;\n      this.emit(\"disconnected\" /* Disconnected */);\n    };\n    this._socket.onopen = () => {\n      if (this._disconnected || this._destroyed) {\n        return;\n      }\n      logger_default.log(\"Socket open\");\n      this.emit(\"open\" /* Open */);\n      this._sendQueuedMessages();\n      this._scheduleHeartbeat();\n    };\n  }\n  _scheduleHeartbeat() {\n    this._wsPingTimer = setTimeout(() => {\n      this._sendHeartbeat();\n    }, this.pingInterval);\n  }\n  _sendHeartbeat() {\n    if (this._destroyed)\n      return;\n    if (!this._wsOpen()) {\n      logger_default.log(`Cannot send heartbeat, because socket closed`);\n      return;\n    }\n    const message = JSON.stringify({ type: \"HEARTBEAT\" /* Heartbeat */ });\n    this._socket.send(message);\n    this._scheduleHeartbeat();\n  }\n  _wsOpen() {\n    return !!this._socket && this._socket.readyState === 1;\n  }\n  _sendQueuedMessages() {\n    const copiedQueue = [...this._messagesQueue];\n    this._messagesQueue = [];\n    for (const message of copiedQueue) {\n      this.send(message);\n    }\n    if (copiedQueue.length > 0) {\n      logger_default.log(`${copiedQueue.length} queued messages was sent`);\n    }\n  }\n  send(data) {\n    if (this._destroyed)\n      throw new Error(\"Socket was destroyed!\");\n    if (!data.type) {\n      this.emit(\"error\" /* Error */, \"Invalid message\");\n      return;\n    }\n    if (!this.alive) {\n      return;\n    }\n    if (this._id == null || !this._wsOpen()) {\n      this._messagesQueue.push(data);\n      return;\n    }\n    const message = JSON.stringify(data);\n    this._socket.send(message);\n  }\n  close() {\n    if (this._disconnected) {\n      return;\n    }\n    this._cleanup();\n    this._id = null;\n    this._disconnected = true;\n  }\n  _cleanup() {\n    if (this._socket) {\n      this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n      this._socket.close();\n      this._socket = void 0;\n    }\n    clearTimeout(this._wsPingTimer);\n  }\n  destroy() {\n    if (this._destroyed)\n      return;\n    this.close();\n    this._messagesQueue.length = 0;\n    this._destroyed = true;\n  }\n};\n\n// lib/negotiator.ts\nfunction noop() {\n}\nvar Negotiator = class {\n  constructor(connection) {\n    this.connection = connection;\n  }\n  get webRtc() {\n    var _a, _b;\n    return (_b = (_a = this.connection.provider.options.polyfills) == null ? void 0 : _a.WebRTC) != null ? _b : window;\n  }\n  startConnection(options) {\n    const peerConnection = this._startPeerConnection();\n    this.connection.peerConnection = peerConnection;\n    if (this.connection.type === \"media\" /* Media */ && options._stream) {\n      this._addTracksToConnection(options._stream, peerConnection);\n    }\n    if (options.originator) {\n      if (this.connection.type === \"data\" /* Data */) {\n        const dataConnection = this.connection;\n        const config = { ordered: !!options.reliable };\n        const dataChannel = peerConnection.createDataChannel(dataConnection.label, config);\n        dataConnection.initialize(dataChannel);\n      }\n      this._makeOffer();\n    } else {\n      this.handleSDP(\"OFFER\", options.sdp);\n    }\n  }\n  _startPeerConnection() {\n    logger_default.log(\"Creating RTCPeerConnection.\");\n    const ctr = this.webRtc.RTCPeerConnection;\n    const peerConnection = new ctr(this.connection.provider.options.config);\n    this._setupListeners(peerConnection);\n    return peerConnection;\n  }\n  _setupListeners(peerConnection) {\n    const peerId = this.connection.peer;\n    const connectionId = this.connection.connectionId;\n    const connectionType = this.connection.type;\n    const provider = this.connection.provider;\n    logger_default.log(\"Listening for ICE candidates, remote streams and data channels.\");\n    peerConnection.onicecandidate = (evt) => {\n      if (!evt.candidate || !evt.candidate.candidate)\n        return;\n      logger_default.log(`Received ICE candidates for ${peerId}:`, evt.candidate);\n      provider.socket.send({\n        type: \"CANDIDATE\" /* Candidate */,\n        payload: {\n          candidate: evt.candidate,\n          type: connectionType,\n          connectionId\n        },\n        dst: peerId\n      });\n    };\n    peerConnection.oniceconnectionstatechange = () => {\n      switch (peerConnection.iceConnectionState) {\n        case \"failed\":\n          logger_default.log(\"iceConnectionState is failed, closing connections to \" + peerId);\n          this.connection.emit(\"error\" /* Error */, new Error(\"Negotiation of connection to \" + peerId + \" failed.\"));\n          this.connection.close();\n          break;\n        case \"closed\":\n          logger_default.log(\"iceConnectionState is closed, closing connections to \" + peerId);\n          this.connection.emit(\"error\" /* Error */, new Error(\"Connection to \" + peerId + \" closed.\"));\n          this.connection.close();\n          break;\n        case \"connected\":\n          logger_default.log(\"iceConnectionState changed to connected on the connection with \" + peerId);\n          break;\n        case \"disconnected\":\n          logger_default.log(\"iceConnectionState changed to disconnected on the connection with \" + peerId);\n          break;\n        case \"completed\":\n          logger_default.log(\"iceConnectionState changed to completed on the connection with \" + peerId);\n          peerConnection.onicecandidate = noop;\n          break;\n      }\n      this.connection.emit(\"iceStateChanged\" /* IceStateChanged */, peerConnection.iceConnectionState);\n    };\n    peerConnection.ondatachannel = (evt) => {\n      logger_default.log(\"Received data channel\");\n      const dataChannel = evt.channel;\n      const connection = provider.getConnection(peerId, connectionId);\n      connection.initialize(dataChannel);\n    };\n    peerConnection.ontrack = (evt) => {\n      logger_default.log(\"Received remote stream\");\n      const stream = evt.streams[0];\n      const connection = provider.getConnection(peerId, connectionId);\n      if (connection.type === \"media\" /* Media */) {\n        const mediaConnection = connection;\n        this._addStreamToMediaConnection(stream, mediaConnection);\n      }\n    };\n  }\n  cleanup() {\n    logger_default.log(\"Cleaning up PeerConnection to \" + this.connection.peer);\n    const peerConnection = this.connection.peerConnection;\n    if (!peerConnection) {\n      return;\n    }\n    this.connection.peerConnection = null;\n    peerConnection.onicecandidate = peerConnection.oniceconnectionstatechange = peerConnection.ondatachannel = peerConnection.ontrack = null;\n    const peerConnectionNotClosed = peerConnection.signalingState !== \"closed\";\n    let dataChannelNotClosed = false;\n    if (this.connection.type === \"data\" /* Data */) {\n      const dataConnection = this.connection;\n      const dataChannel = dataConnection.dataChannel;\n      if (dataChannel) {\n        dataChannelNotClosed = !!dataChannel.readyState && dataChannel.readyState !== \"closed\";\n      }\n    }\n    if (peerConnectionNotClosed || dataChannelNotClosed) {\n      peerConnection.close();\n    }\n  }\n  _makeOffer() {\n    return __async(this, null, function* () {\n      const peerConnection = this.connection.peerConnection;\n      const provider = this.connection.provider;\n      try {\n        const offer = yield peerConnection.createOffer(this.connection.options.constraints);\n        if (peerConnection.signalingState === \"closed\")\n          return;\n        logger_default.log(\"Created offer.\");\n        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") {\n          offer.sdp = this.connection.options.sdpTransform(offer.sdp) || offer.sdp;\n        }\n        try {\n          yield peerConnection.setLocalDescription(offer);\n          logger_default.log(\"Set localDescription:\", offer, `for:${this.connection.peer}`);\n          let payload = {\n            sdp: offer,\n            type: this.connection.type,\n            connectionId: this.connection.connectionId,\n            metadata: this.connection.metadata\n          };\n          if (this.connection.type === \"data\" /* Data */) {\n            const dataConnection = this.connection;\n            payload = __spreadProps(__spreadValues({}, payload), {\n              label: dataConnection.label,\n              reliable: dataConnection.reliable,\n              serialization: dataConnection.serialization\n            });\n          }\n          provider.socket.send({\n            type: \"OFFER\" /* Offer */,\n            payload,\n            dst: this.connection.peer\n          });\n        } catch (err) {\n          if (err != \"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer\") {\n            provider.emitError(\"webrtc\" /* WebRTC */, err);\n            logger_default.log(\"Failed to setLocalDescription, \", err);\n          }\n        }\n      } catch (err_1) {\n        provider.emitError(\"webrtc\" /* WebRTC */, err_1);\n        logger_default.log(\"Failed to createOffer, \", err_1);\n      }\n    });\n  }\n  _makeAnswer() {\n    return __async(this, null, function* () {\n      const peerConnection = this.connection.peerConnection;\n      const provider = this.connection.provider;\n      try {\n        const answer = yield peerConnection.createAnswer();\n        if (peerConnection.signalingState === \"closed\")\n          return;\n        logger_default.log(\"Created answer.\");\n        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") {\n          answer.sdp = this.connection.options.sdpTransform(answer.sdp) || answer.sdp;\n        }\n        try {\n          yield peerConnection.setLocalDescription(answer);\n          logger_default.log(`Set localDescription:`, answer, `for:${this.connection.peer}`);\n          provider.socket.send({\n            type: \"ANSWER\" /* Answer */,\n            payload: {\n              sdp: answer,\n              type: this.connection.type,\n              connectionId: this.connection.connectionId\n            },\n            dst: this.connection.peer\n          });\n        } catch (err) {\n          provider.emitError(\"webrtc\" /* WebRTC */, err);\n          logger_default.log(\"Failed to setLocalDescription, \", err);\n        }\n      } catch (err_1) {\n        provider.emitError(\"webrtc\" /* WebRTC */, err_1);\n        logger_default.log(\"Failed to create answer, \", err_1);\n      }\n    });\n  }\n  handleSDP(type, sdp) {\n    return __async(this, null, function* () {\n      const ctr = this.webRtc.RTCSessionDescription;\n      sdp = new ctr(sdp);\n      const peerConnection = this.connection.peerConnection;\n      const provider = this.connection.provider;\n      logger_default.log(\"Setting remote description\", sdp);\n      const self = this;\n      try {\n        yield peerConnection.setRemoteDescription(sdp);\n        logger_default.log(`Set remoteDescription:${type} for:${this.connection.peer}`);\n        if (type === \"OFFER\") {\n          yield self._makeAnswer();\n        }\n      } catch (err) {\n        provider.emitError(\"webrtc\" /* WebRTC */, err);\n        logger_default.log(\"Failed to setRemoteDescription, \", err);\n      }\n    });\n  }\n  handleCandidate(ice) {\n    return __async(this, null, function* () {\n      logger_default.log(`handleCandidate:`, ice);\n      const candidate = ice.candidate;\n      const sdpMLineIndex = ice.sdpMLineIndex;\n      const sdpMid = ice.sdpMid;\n      const peerConnection = this.connection.peerConnection;\n      const provider = this.connection.provider;\n      try {\n        const ctr = this.webRtc.RTCIceCandidate;\n        yield peerConnection.addIceCandidate(new ctr({\n          sdpMid,\n          sdpMLineIndex,\n          candidate\n        }));\n        logger_default.log(`Added ICE candidate for:${this.connection.peer}`);\n      } catch (err) {\n        provider.emitError(\"webrtc\" /* WebRTC */, err);\n        logger_default.log(\"Failed to handleCandidate, \", err);\n      }\n    });\n  }\n  _addTracksToConnection(stream, peerConnection) {\n    logger_default.log(`add tracks from stream ${stream.id} to peer connection`);\n    if (!peerConnection.addTrack) {\n      return logger_default.error(`Your browser does't support RTCPeerConnection#addTrack. Ignored.`);\n    }\n    stream.getTracks().forEach((track) => {\n      peerConnection.addTrack(track, stream);\n    });\n  }\n  _addStreamToMediaConnection(stream, mediaConnection) {\n    logger_default.log(`add stream ${stream.id} to media connection ${mediaConnection.connectionId}`);\n    mediaConnection.addStream(stream);\n  }\n};\n\n// lib/baseconnection.ts\nvar import_eventemitter32 = __toESM(require_eventemitter3());\nvar BaseConnection = class extends import_eventemitter32.EventEmitter {\n  constructor(peer, provider, options) {\n    super();\n    this.peer = peer;\n    this.provider = provider;\n    this.options = options;\n    this._open = false;\n    this.metadata = options.metadata;\n  }\n  get open() {\n    return this._open;\n  }\n};\n\n// lib/mediaconnection.ts\nvar _MediaConnection = class extends BaseConnection {\n  get type() {\n    return \"media\" /* Media */;\n  }\n  get localStream() {\n    return this._localStream;\n  }\n  get remoteStream() {\n    return this._remoteStream;\n  }\n  constructor(peerId, provider, options) {\n    super(peerId, provider, options);\n    this._localStream = this.options._stream;\n    this.connectionId = this.options.connectionId || _MediaConnection.ID_PREFIX + Utils.randomToken();\n    this._negotiator = new Negotiator(this);\n    if (this._localStream) {\n      this._negotiator.startConnection({\n        _stream: this._localStream,\n        originator: true\n      });\n    }\n  }\n  addStream(remoteStream) {\n    logger_default.log(\"Receiving stream\", remoteStream);\n    this._remoteStream = remoteStream;\n    super.emit(\"stream\" /* Stream */, remoteStream);\n  }\n  handleMessage(message) {\n    const type = message.type;\n    const payload = message.payload;\n    switch (message.type) {\n      case \"ANSWER\" /* Answer */:\n        this._negotiator.handleSDP(type, payload.sdp);\n        this._open = true;\n        break;\n      case \"CANDIDATE\" /* Candidate */:\n        this._negotiator.handleCandidate(payload.candidate);\n        break;\n      default:\n        logger_default.warn(`Unrecognized message type:${type} from peer:${this.peer}`);\n        break;\n    }\n  }\n  answer(stream, options = {}) {\n    if (this._localStream) {\n      logger_default.warn(\"Local stream already exists on this MediaConnection. Are you answering a call twice?\");\n      return;\n    }\n    this._localStream = stream;\n    if (options && options.sdpTransform) {\n      this.options.sdpTransform = options.sdpTransform;\n    }\n    this._negotiator.startConnection(__spreadProps(__spreadValues({}, this.options._payload), { _stream: stream }));\n    const messages = this.provider._getMessages(this.connectionId);\n    for (let message of messages) {\n      this.handleMessage(message);\n    }\n    this._open = true;\n  }\n  close() {\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n      this._negotiator = null;\n    }\n    this._localStream = null;\n    this._remoteStream = null;\n    if (this.provider) {\n      this.provider._removeConnection(this);\n      this.provider = null;\n    }\n    if (this.options && this.options._stream) {\n      this.options._stream = null;\n    }\n    if (!this.open) {\n      return;\n    }\n    this._open = false;\n    super.emit(\"close\" /* Close */);\n  }\n};\nvar MediaConnection = _MediaConnection;\nMediaConnection.ID_PREFIX = \"mc_\";\n\n// lib/encodingQueue.ts\nvar import_eventemitter33 = __toESM(require_eventemitter3());\nvar EncodingQueue = class extends import_eventemitter33.EventEmitter {\n  constructor(fileReader) {\n    super();\n    this.fileReader = fileReader;\n    this._queue = [];\n    this._processing = false;\n    this.fileReader.onload = (evt) => {\n      this._processing = false;\n      if (evt.target) {\n        this.emit(\"done\", evt.target.result);\n      }\n      this.doNextTask();\n    };\n    this.fileReader.onerror = (evt) => {\n      logger_default.error(`EncodingQueue error:`, evt);\n      this._processing = false;\n      this.destroy();\n      this.emit(\"error\", evt);\n    };\n  }\n  get queue() {\n    return this._queue;\n  }\n  get size() {\n    return this.queue.length;\n  }\n  get processing() {\n    return this._processing;\n  }\n  enque(blob) {\n    this.queue.push(blob);\n    if (this.processing)\n      return;\n    this.doNextTask();\n  }\n  destroy() {\n    this.fileReader.abort();\n    this._queue = [];\n  }\n  doNextTask() {\n    if (this.size === 0)\n      return;\n    if (this.processing)\n      return;\n    this._processing = true;\n    this.fileReader.readAsArrayBuffer(this.queue.shift());\n  }\n};\n\n// lib/dataconnection.ts\nvar _DataConnection = class extends BaseConnection {\n  constructor(peerId, provider, options) {\n    super(peerId, provider, options);\n    this.stringify = JSON.stringify;\n    this.parse = JSON.parse;\n    this._buffer = [];\n    this._bufferSize = 0;\n    this._buffering = false;\n    this._chunkedData = {};\n    var _a, _b;\n    this.connectionId = this.options.connectionId || _DataConnection.ID_PREFIX + Utils.randomToken();\n    this.label = this.options.label || this.connectionId;\n    this.serialization = this.options.serialization || \"binary\" /* Binary */;\n    this.reliable = !!this.options.reliable;\n    this.FileReaderCtr = (_b = (_a = provider.options.polyfills) == null ? void 0 : _a.FileReader) != null ? _b : window.FileReader;\n    this._encodingQueue = new EncodingQueue(new this.FileReaderCtr());\n    this._encodingQueue.on(\"done\", (ab) => {\n      this._bufferedSend(ab);\n    });\n    this._encodingQueue.on(\"error\", () => {\n      logger_default.error(`DC#${this.connectionId}: Error occured in encoding from blob to arraybuffer, close DC`);\n      this.close();\n    });\n    this._negotiator = new Negotiator(this);\n    this._negotiator.startConnection(this.options._payload || {\n      originator: true\n    });\n  }\n  get type() {\n    return \"data\" /* Data */;\n  }\n  get dataChannel() {\n    return this._dc;\n  }\n  get bufferSize() {\n    return this._bufferSize;\n  }\n  initialize(dc) {\n    this._dc = dc;\n    this._configureDataChannel();\n  }\n  _configureDataChannel() {\n    if (!this.provider.features.binaryBlob || this.provider.features.reliable) {\n      this.dataChannel.binaryType = \"arraybuffer\";\n    }\n    this.dataChannel.onopen = () => {\n      logger_default.log(`DC#${this.connectionId} dc connection success`);\n      this._open = true;\n      this.emit(\"open\" /* Open */);\n    };\n    this.dataChannel.onmessage = (e) => {\n      logger_default.log(`DC#${this.connectionId} dc onmessage:`, e.data);\n      this._handleDataMessage(e);\n    };\n    this.dataChannel.onclose = () => {\n      logger_default.log(`DC#${this.connectionId} dc closed for:`, this.peer);\n      this.close();\n    };\n  }\n  _handleDataMessage({ data }) {\n    const datatype = data.constructor;\n    const isBinarySerialization = this.serialization === \"binary\" /* Binary */ || this.serialization === \"binary-utf8\" /* BinaryUTF8 */;\n    let deserializedData = data;\n    if (isBinarySerialization) {\n      if (datatype === Blob) {\n        Utils.blobToArrayBuffer(this.FileReaderCtr, data, (ab) => {\n          const unpackedData = Utils.unpack(ab);\n          this.emit(\"data\" /* Data */, unpackedData);\n        });\n        return;\n      } else if (datatype === ArrayBuffer) {\n        deserializedData = Utils.unpack(data);\n      } else if (datatype === String) {\n        const ab = Utils.binaryStringToArrayBuffer(data);\n        deserializedData = Utils.unpack(ab);\n      }\n    } else if (this.serialization === \"json\" /* JSON */) {\n      deserializedData = this.parse(data);\n    }\n    if (deserializedData.__peerData) {\n      this._handleChunk(deserializedData);\n      return;\n    }\n    super.emit(\"data\" /* Data */, deserializedData);\n  }\n  _handleChunk(data) {\n    const id = data.__peerData;\n    const chunkInfo = this._chunkedData[id] || {\n      data: [],\n      count: 0,\n      total: data.total\n    };\n    chunkInfo.data[data.n] = data.data;\n    chunkInfo.count++;\n    this._chunkedData[id] = chunkInfo;\n    if (chunkInfo.total === chunkInfo.count) {\n      delete this._chunkedData[id];\n      const data2 = new Blob(chunkInfo.data);\n      this._handleDataMessage({ data: data2 });\n    }\n  }\n  close() {\n    this._buffer = [];\n    this._bufferSize = 0;\n    this._chunkedData = {};\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n      this._negotiator = null;\n    }\n    if (this.provider) {\n      this.provider._removeConnection(this);\n      this.provider = null;\n    }\n    if (this.dataChannel) {\n      this.dataChannel.onopen = null;\n      this.dataChannel.onmessage = null;\n      this.dataChannel.onclose = null;\n      this._dc = null;\n    }\n    if (this._encodingQueue) {\n      this._encodingQueue.destroy();\n      this._encodingQueue.removeAllListeners();\n      this._encodingQueue = null;\n    }\n    if (!this.open) {\n      return;\n    }\n    this._open = false;\n    super.emit(\"close\" /* Close */);\n  }\n  send(data, chunked) {\n    if (!this.open) {\n      super.emit(\"error\" /* Error */, new Error(\"Connection is not open. You should listen for the `open` event before sending messages.\"));\n      return;\n    }\n    if (this.serialization === \"json\" /* JSON */) {\n      this._bufferedSend(this.stringify(data));\n    } else if (this.serialization === \"binary\" /* Binary */ || this.serialization === \"binary-utf8\" /* BinaryUTF8 */) {\n      const blob = Utils.pack(data);\n      if (!chunked && blob.size > Utils.chunkedMTU) {\n        this._sendChunks(blob);\n        return;\n      }\n      if (!this.provider.features.binaryBlob) {\n        this._encodingQueue.enque(blob);\n      } else {\n        this._bufferedSend(blob);\n      }\n    } else {\n      this._bufferedSend(data);\n    }\n  }\n  _bufferedSend(msg) {\n    if (this._buffering || !this._trySend(msg)) {\n      this._buffer.push(msg);\n      this._bufferSize = this._buffer.length;\n    }\n  }\n  _trySend(msg) {\n    if (!this.open) {\n      return false;\n    }\n    if (this.dataChannel.bufferedAmount > _DataConnection.MAX_BUFFERED_AMOUNT) {\n      this._buffering = true;\n      setTimeout(() => {\n        this._buffering = false;\n        this._tryBuffer();\n      }, 50);\n      return false;\n    }\n    try {\n      this.dataChannel.send(msg);\n    } catch (e) {\n      logger_default.error(`DC#:${this.connectionId} Error when sending:`, e);\n      this._buffering = true;\n      this.close();\n      return false;\n    }\n    return true;\n  }\n  _tryBuffer() {\n    if (!this.open) {\n      return;\n    }\n    if (this._buffer.length === 0) {\n      return;\n    }\n    const msg = this._buffer[0];\n    if (this._trySend(msg)) {\n      this._buffer.shift();\n      this._bufferSize = this._buffer.length;\n      this._tryBuffer();\n    }\n  }\n  _sendChunks(blob) {\n    const blobs = Utils.chunk(blob);\n    logger_default.log(`DC#${this.connectionId} Try to send ${blobs.length} chunks...`);\n    for (let blob2 of blobs) {\n      this.send(blob2, true);\n    }\n  }\n  handleMessage(message) {\n    const payload = message.payload;\n    switch (message.type) {\n      case \"ANSWER\" /* Answer */:\n        this._negotiator.handleSDP(message.type, payload.sdp);\n        break;\n      case \"CANDIDATE\" /* Candidate */:\n        this._negotiator.handleCandidate(payload.candidate);\n        break;\n      default:\n        logger_default.warn(\"Unrecognized message type:\", message.type, \"from peer:\", this.peer);\n        break;\n    }\n  }\n};\nvar DataConnection = _DataConnection;\nDataConnection.ID_PREFIX = \"dc_\";\nDataConnection.MAX_BUFFERED_AMOUNT = 8 * 1024 * 1024;\n\n// lib/api.ts\nvar API = class {\n  constructor(_options) {\n    this._options = _options;\n  }\n  _request(url) {\n    var _a, _b;\n    return ((_b = (_a = this._options.polyfills) == null ? void 0 : _a.fetch) != null ? _b : window.fetch)(url);\n  }\n  _buildUrl(method) {\n    const protocol = this._options.secure ? \"https://\" : \"http://\";\n    let url = protocol + this._options.host + \":\" + this._options.port + this._options.path + this._options.key + \"/\" + method;\n    const queryString = \"?ts=\" + new Date().getTime() + Math.random();\n    url += queryString;\n    return url;\n  }\n  retrieveId() {\n    return __async(this, null, function* () {\n      const url = this._buildUrl(\"id\");\n      try {\n        const response = yield this._request(url);\n        if (response.status !== 200) {\n          throw new Error(`Error. Status:${response.status}`);\n        }\n        return response.text();\n      } catch (error) {\n        logger_default.error(\"Error retrieving ID\", error);\n        let pathError = \"\";\n        if (this._options.path === \"/\" && this._options.host !== Utils.CLOUD_HOST) {\n          pathError = \" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer.\";\n        }\n        throw new Error(\"Could not get an ID from the server.\" + pathError);\n      }\n    });\n  }\n  listAllPeers() {\n    return __async(this, null, function* () {\n      const url = this._buildUrl(\"peers\");\n      try {\n        const response = yield this._request(url);\n        if (response.status !== 200) {\n          if (response.status === 401) {\n            let helpfulError = \"\";\n            if (this._options.host === Utils.CLOUD_HOST) {\n              helpfulError = \"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.\";\n            } else {\n              helpfulError = \"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.\";\n            }\n            throw new Error(\"It doesn't look like you have permission to list peers IDs. \" + helpfulError);\n          }\n          throw new Error(`Error. Status:${response.status}`);\n        }\n        return response.json();\n      } catch (error) {\n        logger_default.error(\"Error retrieving list peers\", error);\n        throw new Error(\"Could not get list peers from the server.\" + error);\n      }\n    });\n  }\n};\n\n// lib/supports.ts\nvar Supports = {\n  isUnifiedPlanSupported(webRtc) {\n    if (!webRtc && typeof window !== \"undefined\") {\n      webRtc = window;\n    }\n    if (typeof webRtc.RTCRtpTransceiver === \"undefined\" || !(\"currentDirection\" in webRtc.RTCRtpTransceiver.prototype)) {\n      return false;\n    }\n    let tempPc;\n    let supported = false;\n    try {\n      tempPc = new webRtc.RTCPeerConnection();\n      tempPc.addTransceiver(\"audio\");\n      supported = true;\n    } catch (e) {\n    } finally {\n      if (tempPc) {\n        tempPc.close();\n      }\n    }\n    return supported;\n  }\n};\n\n// lib/peer.ts\nvar _Peer = class extends import_eventemitter34.EventEmitter {\n  constructor(id, options) {\n    super();\n    this._id = null;\n    this._lastServerId = null;\n    this._destroyed = false;\n    this._disconnected = false;\n    this._open = false;\n    this._connections = /* @__PURE__ */ new Map();\n    this._lostMessages = /* @__PURE__ */ new Map();\n    var _a;\n    let userId;\n    if (id && id.constructor == Object) {\n      options = id;\n    } else if (id) {\n      userId = id.toString();\n    }\n    options = __spreadValues({\n      debug: 0,\n      host: Utils.CLOUD_HOST,\n      port: Utils.CLOUD_PORT,\n      path: \"/\",\n      key: _Peer.DEFAULT_KEY,\n      token: Utils.randomToken(),\n      config: Utils.defaultConfig\n    }, options);\n    this._options = options;\n    if (typeof window !== \"undefined\" && this._options.host === \"/\") {\n      this._options.host = window.location.hostname;\n    }\n    if (this._options.path) {\n      if (this._options.path[0] !== \"/\") {\n        this._options.path = \"/\" + this._options.path;\n      }\n      if (this._options.path[this._options.path.length - 1] !== \"/\") {\n        this._options.path += \"/\";\n      }\n    }\n    if (this._options.secure === void 0 && this._options.host !== Utils.CLOUD_HOST) {\n      this._options.secure = Utils.isSecure();\n    } else if (this._options.host == Utils.CLOUD_HOST) {\n      this._options.secure = true;\n    }\n    if (this._options.logFunction) {\n      logger_default.setLogFunction(this._options.logFunction);\n    }\n    logger_default.logLevel = this._options.debug || 0;\n    this._api = new API(options);\n    this._socket = this._createServerConnection();\n    this.features = _Peer.getFeatures((_a = this._options.polyfills) == null ? void 0 : _a.WebRTC);\n    if (!this.features.audioVideo && !this.features.data) {\n      this._delayedAbort(\"browser-incompatible\" /* BrowserIncompatible */, \"The current browser does not support WebRTC\");\n      return;\n    }\n    if (!!userId && !Utils.validateId(userId)) {\n      this._delayedAbort(\"invalid-id\" /* InvalidID */, `ID \"${userId}\" is invalid`);\n      return;\n    }\n    this.socket.alive = true;\n    if (userId) {\n      this._initialize(userId);\n    } else {\n      this._api.retrieveId().then((id2) => this._initialize(id2)).catch((error) => this._abort(\"server-error\" /* ServerError */, error));\n    }\n  }\n  get id() {\n    return this._id;\n  }\n  get options() {\n    return this._options;\n  }\n  get open() {\n    return this._open;\n  }\n  get socket() {\n    return this._socket;\n  }\n  get connections() {\n    const plainConnections = /* @__PURE__ */ Object.create(null);\n    for (let [k, v] of this._connections) {\n      plainConnections[k] = v;\n    }\n    return plainConnections;\n  }\n  get destroyed() {\n    return this._destroyed;\n  }\n  get disconnected() {\n    return this._disconnected;\n  }\n  _createServerConnection() {\n    const socket = new Socket(this._options);\n    socket.on(\"message\" /* Message */, (data) => {\n      this._handleMessage(data);\n    });\n    socket.on(\"error\" /* Error */, (error) => {\n      this._abort(\"socket-error\" /* SocketError */, error);\n    });\n    socket.on(\"disconnected\" /* Disconnected */, () => {\n      if (this.disconnected) {\n        return;\n      }\n      this.emitError(\"network\" /* Network */, \"Lost connection to server.\");\n      this.disconnect();\n    });\n    socket.on(\"close\" /* Close */, () => {\n      if (this.disconnected) {\n        return;\n      }\n      this._abort(\"socket-closed\" /* SocketClosed */, \"Underlying socket is already closed.\");\n    });\n    return socket;\n  }\n  _initialize(id) {\n    if (this.destroyed)\n      return;\n    this._id = id;\n    this.socket.start(id, this._options.token);\n  }\n  _handleMessage(message) {\n    const type = message.type;\n    const payload = message.payload;\n    const peerId = message.src;\n    switch (type) {\n      case \"OPEN\" /* Open */:\n        this._lastServerId = this.id;\n        this._open = true;\n        this.emit(\"open\" /* Open */, this.id);\n        break;\n      case \"ERROR\" /* Error */:\n        this._abort(\"server-error\" /* ServerError */, payload.msg);\n        break;\n      case \"ID-TAKEN\" /* IdTaken */:\n        this._abort(\"unavailable-id\" /* UnavailableID */, `ID \"${this.id}\" is taken`);\n        break;\n      case \"INVALID-KEY\" /* InvalidKey */:\n        this._abort(\"invalid-key\" /* InvalidKey */, `API KEY \"${this._options.key}\" is invalid`);\n        break;\n      case \"LEAVE\" /* Leave */:\n        logger_default.log(`Received leave message from ${peerId}`);\n        this._cleanupPeer(peerId);\n        this._connections.delete(peerId);\n        break;\n      case \"EXPIRE\" /* Expire */:\n        this.emitError(\"peer-unavailable\" /* PeerUnavailable */, `Could not connect to peer ${peerId}`);\n        break;\n      case \"OFFER\" /* Offer */: {\n        const connectionId = payload.connectionId;\n        let connection = this.getConnection(peerId, connectionId);\n        if (connection) {\n          connection.close();\n          logger_default.warn(`Offer received for existing Connection ID:${connectionId}`);\n        }\n        if (payload.type === \"media\" /* Media */) {\n          connection = new MediaConnection(peerId, this, {\n            connectionId,\n            _payload: payload,\n            metadata: payload.metadata\n          });\n          this._addConnection(peerId, connection);\n          this.emit(\"call\" /* Call */, connection);\n        } else if (payload.type === \"data\" /* Data */) {\n          connection = new DataConnection(peerId, this, {\n            connectionId,\n            _payload: payload,\n            metadata: payload.metadata,\n            label: payload.label,\n            serialization: payload.serialization,\n            reliable: payload.reliable\n          });\n          this._addConnection(peerId, connection);\n          this.emit(\"connection\" /* Connection */, connection);\n        } else {\n          logger_default.warn(`Received malformed connection type:${payload.type}`);\n          return;\n        }\n        const messages = this._getMessages(connectionId);\n        for (let message2 of messages) {\n          connection.handleMessage(message2);\n        }\n        break;\n      }\n      default: {\n        if (!payload) {\n          logger_default.warn(`You received a malformed message from ${peerId} of type ${type}`);\n          return;\n        }\n        const connectionId = payload.connectionId;\n        const connection = this.getConnection(peerId, connectionId);\n        if (connection && connection.peerConnection) {\n          connection.handleMessage(message);\n        } else if (connectionId) {\n          this._storeMessage(connectionId, message);\n        } else {\n          logger_default.warn(\"You received an unrecognized message:\", message);\n        }\n        break;\n      }\n    }\n  }\n  _storeMessage(connectionId, message) {\n    if (!this._lostMessages.has(connectionId)) {\n      this._lostMessages.set(connectionId, []);\n    }\n    this._lostMessages.get(connectionId).push(message);\n  }\n  _getMessages(connectionId) {\n    const messages = this._lostMessages.get(connectionId);\n    if (messages) {\n      this._lostMessages.delete(connectionId);\n      return messages;\n    }\n    return [];\n  }\n  connect(peer, options = {}) {\n    if (this.disconnected) {\n      logger_default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available.\");\n      this.emitError(\"disconnected\" /* Disconnected */, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n    const dataConnection = new DataConnection(peer, this, options);\n    this._addConnection(peer, dataConnection);\n    return dataConnection;\n  }\n  call(peer, stream, options = {}) {\n    if (this.disconnected) {\n      logger_default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect.\");\n      this.emitError(\"disconnected\" /* Disconnected */, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n    if (!stream) {\n      logger_default.error(\"To call a peer, you must provide a stream from your browser's `getUserMedia`.\");\n      return;\n    }\n    options._stream = stream;\n    const mediaConnection = new MediaConnection(peer, this, options);\n    this._addConnection(peer, mediaConnection);\n    return mediaConnection;\n  }\n  _addConnection(peerId, connection) {\n    logger_default.log(`add connection ${connection.type}:${connection.connectionId} to peerId:${peerId}`);\n    if (!this._connections.has(peerId)) {\n      this._connections.set(peerId, []);\n    }\n    this._connections.get(peerId).push(connection);\n  }\n  _removeConnection(connection) {\n    const connections = this._connections.get(connection.peer);\n    if (connections) {\n      const index = connections.indexOf(connection);\n      if (index !== -1) {\n        connections.splice(index, 1);\n        if (connections.length === 0) {\n          this._connections.delete(connection.peer);\n        }\n      }\n    }\n    this._lostMessages.delete(connection.connectionId);\n  }\n  getConnection(peerId, connectionId) {\n    const connections = this._connections.get(peerId);\n    if (!connections) {\n      return null;\n    }\n    for (let connection of connections) {\n      if (connection.connectionId === connectionId) {\n        return connection;\n      }\n    }\n    return null;\n  }\n  _delayedAbort(type, message) {\n    setTimeout(() => {\n      this._abort(type, message);\n    }, 0);\n  }\n  _abort(type, message) {\n    logger_default.error(\"Aborting!\");\n    this.emitError(type, message);\n    if (!this._lastServerId) {\n      this.destroy();\n    } else {\n      this.disconnect();\n    }\n  }\n  emitError(type, err) {\n    logger_default.error(\"Error:\", err);\n    let error;\n    if (typeof err === \"string\") {\n      error = new Error(err);\n    } else {\n      error = err;\n    }\n    error.type = type;\n    this.emit(\"error\" /* Error */, error);\n  }\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n    logger_default.log(`Destroy peer with ID:${this.id}`);\n    this.disconnect();\n    this._cleanup();\n    this.socket.destroy();\n    this._destroyed = true;\n    this.emit(\"close\" /* Close */);\n  }\n  _cleanup() {\n    for (let peerId of this._connections.keys()) {\n      this._cleanupPeer(peerId);\n      this._connections.delete(peerId);\n    }\n    this.socket.removeAllListeners();\n  }\n  _cleanupPeer(peerId) {\n    const connections = this._connections.get(peerId);\n    if (!connections)\n      return;\n    for (let connection of connections) {\n      connection.close();\n    }\n  }\n  disconnect() {\n    if (this.disconnected) {\n      return;\n    }\n    const currentId = this.id;\n    logger_default.log(`Disconnect peer with ID:${currentId}`);\n    this._disconnected = true;\n    this._open = false;\n    this.socket.alive = false;\n    this.socket.close();\n    this._lastServerId = currentId;\n    this._id = null;\n    this.emit(\"disconnected\" /* Disconnected */, currentId);\n  }\n  reconnect() {\n    if (this.disconnected && !this.destroyed) {\n      logger_default.log(`Attempting reconnection to server with ID ${this._lastServerId}`);\n      this._disconnected = false;\n      this.socket.alive = true;\n      this._initialize(this._lastServerId);\n    } else if (this.destroyed) {\n      throw new Error(\"This peer cannot reconnect to the server. It has already been destroyed.\");\n    } else if (!this.disconnected && !this.open) {\n      logger_default.error(\"In a hurry? We're still trying to make the initial connection!\");\n    } else {\n      throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);\n    }\n  }\n  listAllPeers(cb = (_) => {\n  }) {\n    this._api.listAllPeers().then((peers) => cb(peers)).catch((error) => this._abort(\"server-error\" /* ServerError */, error));\n  }\n  static getFeatures(webRtc) {\n    if (!webRtc && typeof window !== \"undefined\") {\n      webRtc = window;\n    }\n    if (!_Peer._features) {\n      _Peer._features = _Peer.checkFeatures(webRtc);\n    }\n    return _Peer._features;\n  }\n  static checkFeatures(webRtc) {\n    if (!webRtc && typeof window !== \"undefined\") {\n      webRtc = window;\n    }\n    const supported = {\n      webRTC: typeof webRtc.RTCPeerConnection !== \"undefined\",\n      audioVideo: true,\n      data: false,\n      binaryBlob: false,\n      reliable: false,\n      unifiedPlan: false\n    };\n    if (!supported.webRTC)\n      return supported;\n    let pc;\n    try {\n      pc = new webRtc.RTCPeerConnection(Utils.defaultConfig);\n      let dc;\n      try {\n        dc = pc.createDataChannel(\"_PEERJSTEST\", { ordered: true });\n        supported.data = true;\n        supported.reliable = !!dc.ordered;\n        try {\n          dc.binaryType = \"blob\";\n          supported.binaryBlob = true;\n        } catch (e) {\n        }\n      } catch (e) {\n      } finally {\n        if (dc) {\n          dc.close();\n        }\n      }\n    } catch (e) {\n    } finally {\n      if (pc) {\n        pc.close();\n      }\n    }\n    supported.unifiedPlan = Supports.isUnifiedPlanSupported(webRtc);\n    return supported;\n  }\n};\nvar Peer = _Peer;\nPeer.DEFAULT_KEY = \"peerjs\";\n\n// lib/index.ts\nvar lib_default = Peer;\nif (typeof window !== \"undefined\") {\n  window.Peer = Peer;\n}\nexport {\n  Peer,\n  Utils,\n  lib_default as default\n};\n"],"names":["__create","Object","create","__defProp","defineProperty","__defProps","defineProperties","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropNames","getOwnPropertyNames","__getOwnPropSymbols","getOwnPropertySymbols","__getProtoOf","getPrototypeOf","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","__commonJS","cb","mod","exports","__toESM","module","isNodeMode","target","copyDefault","desc","get","__reExport","__esModule","default","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","throw","x","done","then","apply","require_bufferbuilder","binaryFeatures","useBlobBuilder","Blob","useArrayBufferView","Uint8Array","size","BlobBuilder","BufferBuilder","this","_pieces","_parts","window","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","data","push","flush","length","buf","buffer","getBuffer","builder","i","ii","getBlob","require_binarypack","BinaryPack2","unpack","Unpacker","pack","packer","Packer","index","dataBuffer","dataView","byteLength","bufferBuilder","_utf8Replace","m","code","charCodeAt","type","unpack_uint8","unpack_raw","unpack_string","unpack_array","unpack_map","unpack_float","unpack_double","unpack_uint16","unpack_uint32","unpack_uint64","unpack_int8","unpack_int16","unpack_int32","unpack_int64","byte","bytes","read","uint16","uint32","uint64","uint8","Math","pow","Error","slice","c","str","String","fromCharCode","objects","Array","map","exp","h32","l32","j","subarray","pack_string","floor","pack_integer","pack_double","constructor","pack_array","File","pack_bin","ArrayBuffer","toString","startsWith","pack_object","Date","toBinaryPack","blob","pack_uint8","pack_uint16","pack_uint32","replace","utf8Length","ary","num","pack_int8","pack_int16","pack_int32","pack_int64","pack_uint64","sign","log","LN2","frac0","frac1","b32","keys","n","high","low","require_eventemitter3","has","prefix","Events","EE","fn","context","once","addListener","emitter","event","TypeError","listener","evt","_events","_eventsCount","clearEvent","EventEmitter5","__proto__","eventNames","events","name","names","concat","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","on","removeAllListeners","off","prefixed","EventEmitter","BinaryPack","DEFAULT_CONFIG","iceServers","urls","username","credential","sdpSemantics","Utils","CLOUD_HOST","CLOUD_PORT","chunkedMTU","defaultConfig","_dataCount","validateId","id","test","chunk","chunks","total","ceil","start","end","min","__peerData","blobToArrayBuffer","FileReaderCtr","fr","onload","result","readAsArrayBuffer","binaryStringToArrayBuffer","binary","byteArray","randomToken","random","substr","isSecure","location","protocol","import_eventemitter34","logger_default","_logLevel","logLevel","_print","warn","error","setLogFunction","rest","copy","message","console","import_eventemitter3","Socket","secure","host","port","path","pingInterval","polyfills","_a","super","_disconnected","_id","_messagesQueue","alive","_destroyed","wsProtocol","_baseUrl","WebSocketConstructor","WebSocket","messagesQueue","destroyed","token","_socket","wsUrl","onmessage","JSON","parse","onclose","_cleanup","onopen","_sendQueuedMessages","_scheduleHeartbeat","_wsPingTimer","setTimeout","_sendHeartbeat","_wsOpen","stringify","send","readyState","copiedQueue","close","clearTimeout","destroy","noop","Negotiator","connection","webRtc","_b","provider","options","WebRTC","startConnection","peerConnection","_startPeerConnection","_stream","_addTracksToConnection","originator","dataConnection","config","ordered","reliable","dataChannel","createDataChannel","label","initialize","_makeOffer","handleSDP","sdp","ctr","RTCPeerConnection","_setupListeners","peerId","peer","connectionId","connectionType","onicecandidate","candidate","socket","payload","dst","oniceconnectionstatechange","iceConnectionState","ondatachannel","channel","getConnection","ontrack","stream","streams","mediaConnection","_addStreamToMediaConnection","cleanup","peerConnectionNotClosed","signalingState","dataChannelNotClosed","offer","createOffer","constraints","sdpTransform","setLocalDescription","metadata","serialization","err","emitError","err_1","_makeAnswer","answer","createAnswer","RTCSessionDescription","self","setRemoteDescription","handleCandidate","ice","sdpMLineIndex","sdpMid","RTCIceCandidate","addIceCandidate","addTrack","getTracks","forEach","track","addStream","import_eventemitter32","BaseConnection","_open","open","_MediaConnection","localStream","_localStream","remoteStream","_remoteStream","ID_PREFIX","_negotiator","handleMessage","_payload","messages","_getMessages","_removeConnection","MediaConnection","import_eventemitter33","EncodingQueue","fileReader","_queue","_processing","doNextTask","onerror","queue","processing","enque","abort","shift","_DataConnection","_buffer","_bufferSize","_buffering","_chunkedData","FileReader","_encodingQueue","ab","_bufferedSend","_dc","bufferSize","dc","_configureDataChannel","features","binaryBlob","binaryType","_handleDataMessage","datatype","deserializedData","unpackedData","_handleChunk","chunkInfo","count","data2","chunked","_sendChunks","msg","_trySend","bufferedAmount","MAX_BUFFERED_AMOUNT","_tryBuffer","blobs","blob2","DataConnection","Supports","isUnifiedPlanSupported","RTCRtpTransceiver","tempPc","supported","addTransceiver","_Peer","userId","_lastServerId","_connections","Map","_lostMessages","debug","DEFAULT_KEY","_options","hostname","logFunction","_api","_request","url","fetch","_buildUrl","method","getTime","retrieveId","response","status","text","pathError","listAllPeers","helpfulError","json","_createServerConnection","getFeatures","audioVideo","_initialize","id2","catch","_abort","_delayedAbort","connections","plainConnections","k","v","disconnected","_handleMessage","disconnect","src","_cleanupPeer","delete","_addConnection","message2","_storeMessage","set","connect","indexOf","splice","currentId","reconnect","_","peers","_features","checkFeatures","webRTC","unifiedPlan","pc","Peer","lib_default"],"sourceRoot":""}